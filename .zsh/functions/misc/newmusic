#
# find new music
#

# arguments:
# -$LS_OPTION - passed to ls(1)
# N - number of entries to show

# silly workaround
exec 5>&2
exec 2>/dev/null

local music=/media/music
local opts num

while [[ -n $1 ]]; do
  case $1 in
    -*) opts+=$1
        shift;;
    [0-9]*) num=$1
            shift;;
    *)      shift;;
  esac
done

[[ ! -e $music ]] && return 5
while read dir; do ls -d $opts $dir; done < <(print -l $music/**/*[0-9]*~*CD*(/Oa) | tail -${num:-5})

exec 2>&5

# vim:ft=zsh:sw=2:ts=2:et
